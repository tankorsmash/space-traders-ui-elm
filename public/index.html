<!DOCTYPE html>
<html>
  <head>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS",
          sans-serif;
      }
    </style>
  </head>
  <body>
    <script src="elm.js"></script>
    <script>
      const TOKEN_KEY = "token";

      const maybeToken = localStorage.getItem(TOKEN_KEY);

      const app = Elm.Main.init({ flags: { accessToken: maybeToken } });

      app.ports.setToken.subscribe(function (token) {
        localStorage.setItem(TOKEN_KEY, token);
      });

      app.ports.clearToken.subscribe(function () {
        localStorage.removeItem(TOKEN_KEY);
      });
    </script>
  </body>
</html>
